<%- include("../layouts/boilerplate") %>

<style>
  table {
    width: 80%;
    border-collapse: collapse;
    margin: 20px auto;
  }
  th,
  td {
    border: 1px solid black;
    padding: 10px;
    text-align: center;
  }
  th {
    background-color: #f2f2f2;
  }
</style>

<h2 style="text-align: center">Registered Students</h2>

<table>
  <thead>
    <tr>
      <th>Student Name</th>
      <!-- Static header for student name -->
      <% event.formFields.forEach(field => { %> <% if (field.label.toLowerCase()
      !== "student name") { %>
      <!-- Skip "Student Name" if it exists -->
      <th><%= field.label %></th>
      <% } %> <% }) %>
    </tr>
  </thead>
  <tbody>
    <% registrations.forEach(registration => { %> <% if (registration.studentId)
    { %>
    <tr>
      <td><%= registration.studentId.studentName || "N/A" %></td>
      <% event.formFields.forEach(field => { %> <% if (field.label.toLowerCase()
      !== "student name") { %>
      <!-- Skip "Student Name" in data -->
      <% const value = registration.formData.get(field.label); %>
      <td><%= value || "N/A" %></td>
      <% } %> <% }) %>
    </tr>
    <% } %> <% }) %>
  </tbody>
</table>
